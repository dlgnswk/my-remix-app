var ve=t=>{throw TypeError(t)};var se=(t,e,s)=>e.has(t)||ve("Cannot "+s);var i=(t,e,s)=>(se(t,e,"read from private field"),s?s.call(t):e.get(t)),p=(t,e,s)=>e.has(t)?ve("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),a=(t,e,s,r)=>(se(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),y=(t,e,s)=>(se(t,e,"access private method"),s);import{r as w,o as Ue,n as De}from"./components-B97Wnn21.js";var fe=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$=typeof window>"u"||"Deno"in globalThis;function Me(){}function ge(t){return typeof t=="number"&&t>=0&&t!==1/0}function ke(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Y(t,e){return typeof t=="function"?t(e):t}function S(t,e){return typeof t=="function"?t(e):t}function Le(t,e){if(t===e)return t;const s=me(t)&&me(e);if(s||Re(t)&&Re(e)){const r=s?t:Object.keys(t),o=r.length,u=s?e:Object.keys(e),c=u.length,n=s?[]:{};let f=0;for(let v=0;v<c;v++){const b=s?v:u[v];(!s&&r.includes(b)||s)&&t[b]===void 0&&e[b]===void 0?(n[b]=void 0,f++):(n[b]=Le(t[b],e[b]),n[b]===t[b]&&t[b]!==void 0&&f++)}return o===c&&f===o?t:n}return e}function ie(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function me(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Re(t){if(!Ce(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!Ce(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Ce(t){return Object.prototype.toString.call(t)==="[object Object]"}function we(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?Le(t,e):e}var P,I,A,xe,_e=(xe=class extends fe{constructor(){super();p(this,P);p(this,I);p(this,A);a(this,A,e=>{if(!$&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){i(this,I)||this.setEventListener(i(this,A))}onUnsubscribe(){var e;this.hasListeners()||((e=i(this,I))==null||e.call(this),a(this,I,void 0))}setEventListener(e){var s;a(this,A,e),(s=i(this,I))==null||s.call(this),a(this,I,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){i(this,P)!==e&&(a(this,P,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof i(this,P)=="boolean"?i(this,P):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},P=new WeakMap,I=new WeakMap,A=new WeakMap,xe),Ae=new _e,B,Q,N,Ie,Be=(Ie=class extends fe{constructor(){super();p(this,B,!0);p(this,Q);p(this,N);a(this,N,e=>{if(!$&&window.addEventListener){const s=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){i(this,Q)||this.setEventListener(i(this,N))}onUnsubscribe(){var e;this.hasListeners()||((e=i(this,Q))==null||e.call(this),a(this,Q,void 0))}setEventListener(e){var s;a(this,N,e),(s=i(this,Q))==null||s.call(this),a(this,Q,e(this.setOnline.bind(this)))}setOnline(e){i(this,B)!==e&&(a(this,B,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return i(this,B)}},B=new WeakMap,Q=new WeakMap,N=new WeakMap,Ie),Ne=new Be;function Oe(){let t,e;const s=new Promise((o,u)=>{t=o,e=u});s.status="pending",s.catch(()=>{});function r(o){Object.assign(s,o),delete s.resolve,delete s.reject}return s.resolve=o=>{r({status:"fulfilled",value:o}),t(o)},s.reject=o=>{r({status:"rejected",reason:o}),e(o)},s}function ze(t){return(t??"online")==="online"?Ne.isOnline():!0}function qe(){let t=[],e=0,s=n=>{n()},r=n=>{n()},o=n=>setTimeout(n,0);const u=n=>{e?t.push(n):o(()=>{s(n)})},c=()=>{const n=t;t=[],n.length&&o(()=>{r(()=>{n.forEach(f=>{s(f)})})})};return{batch:n=>{let f;e++;try{f=n()}finally{e--,e||c()}return f},batchCalls:n=>(...f)=>{u(()=>{n(...f)})},schedule:u,setNotifyFunction:n=>{s=n},setBatchNotifyFunction:n=>{r=n},setScheduler:n=>{o=n}}}var je=qe();function He(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ze(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}var C,h,G,m,U,z,L,E,J,q,H,D,M,j,V,l,K,re,ne,oe,ae,he,ce,ue,Te,Qe,Ve=(Qe=class extends fe{constructor(e,s){super();p(this,l);p(this,C);p(this,h);p(this,G);p(this,m);p(this,U);p(this,z);p(this,L);p(this,E);p(this,J);p(this,q);p(this,H);p(this,D);p(this,M);p(this,j);p(this,V,new Set);this.options=s,a(this,C,e),a(this,E,null),a(this,L,Oe()),this.options.experimental_prefetchInRender||i(this,L).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,h).addObserver(this),Ee(i(this,h),this.options)?y(this,l,K).call(this):this.updateResult(),y(this,l,ae).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return le(i(this,h),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return le(i(this,h),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,y(this,l,he).call(this),y(this,l,ce).call(this),i(this,h).removeObserver(this)}setOptions(e,s){const r=this.options,o=i(this,h);if(this.options=i(this,C).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof S(this.options.enabled,i(this,h))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");y(this,l,ue).call(this),i(this,h).setOptions(this.options),r._defaulted&&!ie(this.options,r)&&i(this,C).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,h),observer:this});const u=this.hasListeners();u&&Se(i(this,h),o,this.options,r)&&y(this,l,K).call(this),this.updateResult(s),u&&(i(this,h)!==o||S(this.options.enabled,i(this,h))!==S(r.enabled,i(this,h))||Y(this.options.staleTime,i(this,h))!==Y(r.staleTime,i(this,h)))&&y(this,l,re).call(this);const c=y(this,l,ne).call(this);u&&(i(this,h)!==o||S(this.options.enabled,i(this,h))!==S(r.enabled,i(this,h))||c!==i(this,j))&&y(this,l,oe).call(this,c)}getOptimisticResult(e){const s=i(this,C).getQueryCache().build(i(this,C),e),r=this.createResult(s,e);return Ke(this,r)&&(a(this,m,r),a(this,z,this.options),a(this,U,i(this,h).state)),r}getCurrentResult(){return i(this,m)}trackResult(e,s){const r={};return Object.keys(e).forEach(o=>{Object.defineProperty(r,o,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(o),s==null||s(o),e[o])})}),r}trackProp(e){i(this,V).add(e)}getCurrentQuery(){return i(this,h)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=i(this,C).defaultQueryOptions(e),r=i(this,C).getQueryCache().build(i(this,C),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(e){return y(this,l,K).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,m)))}createResult(e,s){var ye;const r=i(this,h),o=this.options,u=i(this,m),c=i(this,U),n=i(this,z),v=e!==r?e.state:i(this,G),{state:b}=e;let d={...b},T=!1,R;if(s._optimisticResults){const g=this.hasListeners(),k=!g&&Ee(e,s),_=g&&Se(e,r,s,o);(k||_)&&(d={...d,...He(b.data,e.options)}),s._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:W,errorUpdatedAt:x,status:F}=d;if(s.select&&d.data!==void 0)if(u&&d.data===(c==null?void 0:c.data)&&s.select===i(this,J))R=i(this,q);else try{a(this,J,s.select),R=s.select(d.data),R=we(u==null?void 0:u.data,R,s),a(this,q,R),a(this,E,null)}catch(g){a(this,E,g)}else R=d.data;if(s.placeholderData!==void 0&&R===void 0&&F==="pending"){let g;if(u!=null&&u.isPlaceholderData&&s.placeholderData===(n==null?void 0:n.placeholderData))g=u.data;else if(g=typeof s.placeholderData=="function"?s.placeholderData((ye=i(this,H))==null?void 0:ye.state.data,i(this,H)):s.placeholderData,s.select&&g!==void 0)try{g=s.select(g),a(this,E,null)}catch(k){a(this,E,k)}g!==void 0&&(F="success",R=we(u==null?void 0:u.data,g,s),T=!0)}i(this,E)&&(W=i(this,E),R=i(this,q),x=Date.now(),F="error");const Z=d.fetchStatus==="fetching",ee=F==="pending",te=F==="error",pe=ee&&Z,be=R!==void 0,O={status:F,fetchStatus:d.fetchStatus,isPending:ee,isSuccess:F==="success",isError:te,isInitialLoading:pe,isLoading:pe,data:R,dataUpdatedAt:d.dataUpdatedAt,error:W,errorUpdatedAt:x,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>v.dataUpdateCount||d.errorUpdateCount>v.errorUpdateCount,isFetching:Z,isRefetching:Z&&!ee,isLoadingError:te&&!be,isPaused:d.fetchStatus==="paused",isPlaceholderData:T,isRefetchError:te&&be,isStale:de(e,s),refetch:this.refetch,promise:i(this,L)};if(this.options.experimental_prefetchInRender){const g=X=>{O.status==="error"?X.reject(O.error):O.data!==void 0&&X.resolve(O.data)},k=()=>{const X=a(this,L,O.promise=Oe());g(X)},_=i(this,L);switch(_.status){case"pending":e.queryHash===r.queryHash&&g(_);break;case"fulfilled":(O.status==="error"||O.data!==_.value)&&k();break;case"rejected":(O.status!=="error"||O.error!==_.reason)&&k();break}}return O}updateResult(e){const s=i(this,m),r=this.createResult(i(this,h),this.options);if(a(this,U,i(this,h).state),a(this,z,this.options),i(this,U).data!==void 0&&a(this,H,i(this,h)),ie(r,s))return;a(this,m,r);const o={},u=()=>{if(!s)return!0;const{notifyOnChangeProps:c}=this.options,n=typeof c=="function"?c():c;if(n==="all"||!n&&!i(this,V).size)return!0;const f=new Set(n??i(this,V));return this.options.throwOnError&&f.add("error"),Object.keys(i(this,m)).some(v=>{const b=v;return i(this,m)[b]!==s[b]&&f.has(b)})};(e==null?void 0:e.listeners)!==!1&&u()&&(o.listeners=!0),y(this,l,Te).call(this,{...o,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&y(this,l,ae).call(this)}},C=new WeakMap,h=new WeakMap,G=new WeakMap,m=new WeakMap,U=new WeakMap,z=new WeakMap,L=new WeakMap,E=new WeakMap,J=new WeakMap,q=new WeakMap,H=new WeakMap,D=new WeakMap,M=new WeakMap,j=new WeakMap,V=new WeakMap,l=new WeakSet,K=function(e){y(this,l,ue).call(this);let s=i(this,h).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(Me)),s},re=function(){y(this,l,he).call(this);const e=Y(this.options.staleTime,i(this,h));if($||i(this,m).isStale||!ge(e))return;const r=ke(i(this,m).dataUpdatedAt,e)+1;a(this,D,setTimeout(()=>{i(this,m).isStale||this.updateResult()},r))},ne=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,h)):this.options.refetchInterval)??!1},oe=function(e){y(this,l,ce).call(this),a(this,j,e),!($||S(this.options.enabled,i(this,h))===!1||!ge(i(this,j))||i(this,j)===0)&&a(this,M,setInterval(()=>{(this.options.refetchIntervalInBackground||Ae.isFocused())&&y(this,l,K).call(this)},i(this,j)))},ae=function(){y(this,l,re).call(this),y(this,l,oe).call(this,y(this,l,ne).call(this))},he=function(){i(this,D)&&(clearTimeout(i(this,D)),a(this,D,void 0))},ce=function(){i(this,M)&&(clearInterval(i(this,M)),a(this,M,void 0))},ue=function(){const e=i(this,C).getQueryCache().build(i(this,C),this.options);if(e===i(this,h))return;const s=i(this,h);a(this,h,e),a(this,G,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},Te=function(e){je.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(i(this,m))}),i(this,C).getQueryCache().notify({query:i(this,h),type:"observerResultsUpdated"})})},Qe);function We(t,e){return S(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Ee(t,e){return We(t,e)||t.state.data!==void 0&&le(t,e,e.refetchOnMount)}function le(t,e,s){if(S(e.enabled,t)!==!1){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&de(t,e)}return!1}function Se(t,e,s,r){return(t!==e||S(r.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&de(t,s)}function de(t,e){return S(e.enabled,t)!==!1&&t.isStaleByTime(Y(e.staleTime,t))}function Ke(t,e){return!ie(t.getCurrentResult(),e)}var $e=w.createContext(void 0),Ge=t=>{const e=w.useContext($e);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Pe=w.createContext(!1),Je=()=>w.useContext(Pe);Pe.Provider;function Xe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Ye=w.createContext(Xe()),Ze=()=>w.useContext(Ye);function et(t,e){return typeof t=="function"?t(...e):!!t}function tt(){}var st=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},it=t=>{w.useEffect(()=>{t.clearReset()},[t])},rt=({result:t,errorResetBoundary:e,throwOnError:s,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&et(s,[t.error,r]),nt=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},ot=(t,e)=>t.isLoading&&t.isFetching&&!e,at=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Fe=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function ht(t,e,s){var b,d,T,R,W;const r=Ge(),o=Je(),u=Ze(),c=r.defaultQueryOptions(t);(d=(b=r.getDefaultOptions().queries)==null?void 0:b._experimental_beforeQuery)==null||d.call(b,c),c._optimisticResults=o?"isRestoring":"optimistic",nt(c),st(c,u),it(u);const n=!r.getQueryCache().get(c.queryHash),[f]=w.useState(()=>new e(r,c)),v=f.getOptimisticResult(c);if(w.useSyncExternalStore(w.useCallback(x=>{const F=o?()=>{}:f.subscribe(je.batchCalls(x));return f.updateResult(),F},[f,o]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),w.useEffect(()=>{f.setOptions(c,{listeners:!1})},[c,f]),at(c,v))throw Fe(c,f,u);if(rt({result:v,errorResetBoundary:u,throwOnError:c.throwOnError,query:r.getQueryCache().get(c.queryHash)}))throw v.error;if((R=(T=r.getDefaultOptions().queries)==null?void 0:T._experimental_afterQuery)==null||R.call(T,c,v),c.experimental_prefetchInRender&&!$&&ot(v,o)){const x=n?Fe(c,f,u):(W=r.getQueryCache().get(c.queryHash))==null?void 0:W.promise;x==null||x.catch(tt).finally(()=>{f.updateResult()})}return c.notifyOnChangeProps?v:f.trackResult(v)}function ct(t,e){return ht(t,Ve)}function dt(){const t=Ue(),{data:e}=ct({queryKey:["hello"],queryFn:async()=>(await fetch("http://127.0.0.1:8000/api/hello")).json(),initialData:t});return De.jsx("h1",{children:e.message})}export{dt as default};
